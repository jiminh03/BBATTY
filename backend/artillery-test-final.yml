config:
  target: 'ws://i13a403.p.ssafy.io:8084'
  phases:
    - duration: 30
      arrivalRate: 5
      name: "ğŸ§ª í…ŒìŠ¤íŠ¸ ëª¨ë“œ Warm up"
    - duration: 60
      arrivalRate: 10
      name: "ğŸ”¥ ì €ë¶€í•˜ í…ŒìŠ¤íŠ¸"
    - duration: 30
      arrivalRate: 20
      name: "âš¡ ê³ ë¶€í•˜ í…ŒìŠ¤íŠ¸"
  ws:
    connect:
      timeout: 15

scenarios:
  - name: "ì§ê´€ ì±„íŒ… í…ŒìŠ¤íŠ¸ (Redis Pub/Sub)"
    weight: 50
    engine: ws
    flow:
      - connect:
          url: "/ws/watch-chat?sessionToken=test-watch-{{ $randomString() }}&gameId={{ $randomInt(1, 3) }}&teamId={{ $randomInt(1, 4) }}"
      - think: 1
      - send: 
          payload: 'ê²½ê¸° ì‹œì‘! {{ $randomString() }}'
      - think: 2
      - send:
          payload: 'ì¢‹ì€ í”Œë ˆì´ë„¤ìš”!'
      - think: 1
      - send:
          payload: '{{ $randomString() }} í™”ì´íŒ…!'
      - think: 3

  - name: "ë§¤ì¹­ ì±„íŒ… í…ŒìŠ¤íŠ¸ (Kafka)"
    weight: 50
    engine: ws
    flow:
      - connect:
          url: "/ws/match-chat?sessionToken=test-match-{{ $randomString() }}&matchId=match_{{ $randomInt(1, 3) }}"
      - think: 1
      - send: 
          payload: 'ì•ˆë…•í•˜ì„¸ìš”! {{ $randomString() }}'
      - think: 2
      - send:
          payload: 'ê°™ì´ ê²Œì„í•´ìš”~'
      - think: 1
      - send:
          payload: 'GG! {{ $timestamp }}'
      - think: 3