# 📚 주간 학습 기록
**기간**: 2025년 7월 14일 ~ 7월 18일  
**프로젝트: 빠티(BBATTY)**   
직관 인증부터 팀 커뮤니티, 실시간 채팅, 승률 기록까지 야구팬의 직관 경험을 연결하는 통합 플랫폼

---

## 🎯 이번 주 학습 목표
- 프로젝트 주제 선정 및 아이디어 디벨롭
- 프로젝트 요구사항 분석 및 기능 명세 작성
- Spring Security 개념 학습 및 JWT 인증 방식 이해

---

## 📋 팀 협업 내용

### 1. 기능 명세서 작성 과정에서 배운 것들

#### 🔍 요구사항 분석 방법론
```
사용자 스토리 → 기능 분해 → 우선순위 설정 → 기술적 구현 방안 검토
```

**배운 점:**
- 단순히 기능을 나열하는 것이 아니라, **사용자 관점에서 왜 필요한지**를 먼저 고민해야 함
- MVP(Minimum Viable Product) 개념을 실제로 적용해보며 **개발 우선순위의 중요성** 체감

#### 🎨 UI/UX 기획에서의 학습
```
팀별 색상 테마 적용 → 사용자 몰입도 향상
GPS 기반 직관 인증 → 신뢰성 있는 커뮤니티 구축
무한 스크롤 vs 페이지네이션 → 모바일 최적화 고려
```

**새롭게 알게 된 것:**
- **프로그레시브 웹앱** vs **하이브리드 앱**
```
- PWA는 웹 기술로 개발한 웹앱의 한 형태로, 모바일 기기에서 앱과 유사한 사용자 경험을 제공
- 앱 스토어를 거치지 않고 웹 브라우저를 통해 바로 사용할 수 있음
```
```
- 하이브리드 앱은 웹 기술로 개발한 웹앱을 모바일 앱 형태로 래핑하는 방식으로 만들어짐
- 네이티브 기능에 접근할 수 있으며, 앱 스토어를 통해 설치해야함
```

### 2. 프로젝트 범위 설정에서 배운 교훈

#### ⚖️ 이상 vs 현실의 균형
**초기 기획**: 모든 기능을 처음부터 완벽하게 구현하고 싶었음   
**현실적 조정**: 물리적 한계를 인정하고 핵심 기능에 집중

```
기능 우선순위 매트릭스 활용:
- 높은 가치 + 낮은 복잡도 → 1순위
- 높은 가치 + 높은 복잡도 → 2순위
- 낮은 가치 + 높은 복잡도 → 보류
```

---

## 🔐 Spring Security 학습 기록

### 1. 학습 배경
팀에서 백엔드 보안을 담당하게 되어 Spring Security 학습 필요성을 느낌

---

### 2. 핵심 개념 학습

---

## 🔐 1. 스프링 시큐리티 기본 개념

### 스프링 시큐리티란?

- **Java/Spring 기반 보안 프레임워크**
- 인증(Authentication)과 인가(Authorization)를 담당
- **어노테이션 기반 보안 설정**으로 개발자 친화적

### 핵심 개념

### 🔑 Authentication (인증)

- **"당신이 누구인가?"**
- 사용자가 자신이 주장하는 사람이 맞는지 확인
- **우리 앱**: 이메일/비밀번호로 야구팬임을 확인

### 🛡️ Authorization (인가)

- **"당신이 이것을 할 수 있는가?"**
- 인증된 사용자가 특정 리소스에 접근할 권한이 있는지 확인
- **우리 앱**: 같은 팀 팬만 해당 팀 채팅방 접근 가능

### 🔄 SecurityContext

- 현재 인증된 사용자 정보를 저장하는 공간
- **각 요청마다 독립적으로 관리**되어 사용자 정보가 섞이지 않음
- 컨트롤러 어디서든 현재 로그인 유저 정보에 접근 가능

---

## 🎫 2. JWT 토큰 이해하기

### JWT(JSON Web Token)란?

- **JSON 객체를 안전하게 전송하기 위한 표준**
- Self-contained: 토큰 자체에 필요한 정보 포함
- Stateless: 서버에서 세션 정보를 저장할 필요 없음

### JWT 구조: Header.Payload.Signature

### 📋 Header

```json
{
  "alg": "HS256",
  "typ": "JWT"
}
```

- 토큰 타입과 암호화 알고리즘 정보

### 📦 Payload

```json
{
  "sub": "user123",
  "team": "한화이글스",
  "iat": 1625097600,
  "exp": 1625184000
}
```

- 사용자 정보와 클레임(Claims) 포함; 권한 데이터

### ✍️ Signature

- Header + Payload + Secret Key로 생성
- 토큰 위변조 방지

---

## ⚾ 3. 우리 프로젝트에서의 활용 방안

### 회원가입/로그인 플로우

### 1️⃣ 회원가입 시

- 팀 선택 → 개인정보 입력 → 이메일 인증

### 2️⃣ 로그인 시

```
사용자 → 이메일/비밀번호 입력
      → 서버에서 검증
      → JWT 토큰 발급 (Access + Refresh)
      → 클라이언트 저장
```

### 3️⃣ API 요청 시

```
클라이언트 → Authorization: Bearer {JWT}
          → 서버에서 토큰 검증
          → 사용자 정보 추출
          → 비즈니스 로직 수행 
```

### 토큰 설계 전략

### Access Token (짧은 만료시간)

- API 요청 시 사용
- 저장: 메모리에 임시 저장
- 사용자 ID, 팀 정보, 권한 정보 포함

### Refresh Token (긴 만료시간)

- Access Token 갱신용
- 저장: 안전한 곳 (로컬 스토리지)
- 정보: 최소한의 식별 정보만 포함
- **Redis에 저장하여 로그아웃 시 블랙리스트 관리**

### 보안 강화 방안

### 🚫 토큰 블랙리스트 (Redis 활용)

**로그아웃 시 토큰을 무효화하는 방법**

```
문제상황: JWT는 만료시간까지 계속 유효함
해결방법: 로그아웃한 토큰을 Redis에 "사용금지 목록"으로 저장

로그아웃 클릭 → 해당 토큰을 Redis에 저장
             → 이후 API 요청시 블랙리스트 확인
             → 블랙리스트에 있으면 접근 거부
```

### 🔄 토큰 갱신 전략

- Access Token 만료 전 자동 갱신
- Silent Refresh로 사용자 경험 개선

---

## ⚠️ 4. 구현 시 주의사항

### 보안 관련

- **Secret Key 관리**: 환경변수로 분리
- **HTTPS 필수**: 토큰 탈취 방지
- **토큰 저장**: PWA 특성상 브라우저 보안 저장소 활용

### 성능 관련

- **Redis 캐싱**: 사용자 정보와 권한 정보 캐싱
- **토큰 검증 최적화**: 서명 검증 로직 효율화

### 사용자 경험

- **자동 로그인**: 스플래시 화면에서 토큰 유효성 검사
- **에러 처리**: "로그인이 필요합니다" 등 명확한 안내

---

## 💭 학습 회고

### 🌟 잘한 점
- **체계적인 접근**: 무작정 코딩하지 않고 설계부터 차근차근
- **팀원과의 소통**: 각자의 강점을 파악하고 역할 분담
- **현실적인 목표 설정**: 이상과 현실의 균형점 찾기
- **보안 개념의 체계적 정리**: 단순 암기가 아닌 원리 중심 학습

### 🤔 아쉬운 점
- **깊이 있는 학습 부족**: Spring Security의 고급 기능까지는 미처 다루지 못함
- **실습 시간 부족**: 이론 학습에 치중, 실제 구현 경험 부족

### 📈 개선 방향
- **다음 주부터는 이론:실습 = 3:7 비율**로 조정
- **매일 작은 기능이라도 구현**하여 진행상황 체감
- **보안 관련 실제 취약점 사례** 연구로 실무 감각 향상

---


**🎯 이번 주는 프로젝트의 방향성을 잡고, Spring Security의 핵심 개념들을 체계적으로 정리하는 주였습니다. 특히 인증과 인가의 차이, JWT의 작동 원리, 토큰 기반 보안 전략에 대해 깊이 있게 이해할 수 있었습니다. 다음 주부터는 이론을 바탕으로 실제 구현에 집중하겠습니다!**